// This file was generated by generate-gltf-classes.
// DO NOT EDIT THIS FILE!
#include "AnimationSamplerJsonHandler.h"
#include "CesiumGltf/AnimationSampler.h"

#include <cassert>
#include <string>

using namespace CesiumGltf;

AnimationSamplerJsonHandler::AnimationSamplerJsonHandler(
    const ReaderContext& context) noexcept
    : ExtensibleObjectJsonHandler(context),
      _input(context),
      _interpolation(context),
      _output(context) {}

void AnimationSamplerJsonHandler::reset(
    IJsonReader* pParent,
    AnimationSampler* pObject) {
  ExtensibleObjectJsonHandler::reset(pParent, pObject);
  this->_pObject = pObject;
}

AnimationSampler* AnimationSamplerJsonHandler::getObject() {
  return this->_pObject;
}

void AnimationSamplerJsonHandler::reportWarning(
    const std::string& warning,
    std::vector<std::string>&& context) {
  if (this->getCurrentKey()) {
    context.emplace_back(std::string(".") + this->getCurrentKey());
  }
  this->parent()->reportWarning(warning, std::move(context));
}

IJsonReader*
AnimationSamplerJsonHandler::readObjectKey(const std::string_view& str) {
  assert(this->_pObject);
  return this->readObjectKeyAnimationSampler(
      AnimationSampler::TypeName,
      str,
      *this->_pObject);
}

IJsonReader* AnimationSamplerJsonHandler::readObjectKeyAnimationSampler(
    const std::string& objectType,
    const std::string_view& str,
    AnimationSampler& o) {
  using namespace std::string_literals;

  if ("input"s == str)
    return property("input", this->_input, o.input);
  if ("interpolation"s == str)
    return property("interpolation", this->_interpolation, o.interpolation);
  if ("output"s == str)
    return property("output", this->_output, o.output);

  return this->readObjectKeyExtensibleObject(objectType, str, *this->_pObject);
}

void AnimationSamplerJsonHandler::InterpolationJsonHandler::reset(
    IJsonReader* pParent,
    AnimationSampler::Interpolation* pEnum) {
  JsonReader::reset(pParent);
  this->_pEnum = pEnum;
}

IJsonReader* AnimationSamplerJsonHandler::InterpolationJsonHandler::readString(
    const std::string_view& str) {
  using namespace std::string_literals;

  assert(this->_pEnum);

  if ("LINEAR"s == str)
    *this->_pEnum = AnimationSampler::Interpolation::LINEAR;
  else if ("STEP"s == str)
    *this->_pEnum = AnimationSampler::Interpolation::STEP;
  else if ("CUBICSPLINE"s == str)
    *this->_pEnum = AnimationSampler::Interpolation::CUBICSPLINE;
  else
    return nullptr;

  return this->parent();
}
